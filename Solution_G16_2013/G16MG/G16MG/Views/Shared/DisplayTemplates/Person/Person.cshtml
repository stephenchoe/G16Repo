@model G16_2013.Models.MemberModel.PersonViewModel

<div id="divPerson">
    <table class="table table-striped table-hover" id="tablePerson">
        <thead>
            <tr>
                <th></th>
                <th>@Html.LabelFor(m => m.Name)</th>
                <th>@Html.LabelFor(m => m.TWID)</th>
                <th>@Html.LabelFor(m => m.Gender)</th>
                <th>@Html.LabelFor(m => m.Birthday)</th>
                <th>@Html.LabelFor(m => m.PS)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                   @if(Model.AllowEdit)
                   {
                     <button type="button" class="btn btn-default btn-sm" id="btnEditPerson">
                         <span class="glyphicon glyphicon-pencil"></span>
                     </button>
                   }
                </td>
                <td>@Html.DisplayFor(m => m.Name) </td>
                <td>@Html.DisplayFor(m => m.TWID)</td>
                <td>@Html.DisplayFor(m => m.GenderText)</td>
                <td>@Html.DisplayFor(m => m.Birthday)</td>
                <td>@Html.DisplayFor(m => m.PS)</td>
            </tr>
        </tbody>
    </table>
    <div id="dialog-message" style="display: none">
        <h1 class="text-success"><span class="glyphicon glyphicon-ok-sign"></span>修改完成</h1>
    </div>

     @if (TempData["message"] != null)
    {     
     @Html.Action("StatusAlert", "Base", new { status= TempData["message"],positionId="#divPerson"})     
    }
</div>

@using (Html.BeginScriptContext())
{
    
    
    Html.AddScriptBlock(
        @<script type="text/javascript">

            $("#btnEditPerson").click(function (e) {
                e.preventDefault();

               
                var actionUrl='@Url.Action("EditPerson", "Person", new  {id=Model.PersonId })'
                var type = "GET";
                var divToReplace = $("#divPerson");
               
                 
                AsyncUpdate(actionUrl, type, divToReplace);

            })
        </script>
, true);
}
